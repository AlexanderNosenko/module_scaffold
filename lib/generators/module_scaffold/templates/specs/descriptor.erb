<%= mc_wrap_with_namespaces(@descriptor_spec_helper.namespace_dirs) do
<<-EOS
class #{@descriptor_spec_helper.class_name} < BaseDescriptor

  def type
    '#{@descriptor_spec_helper.resource_name}'
  end

  def response_attributes
    {
      #{@policy_helper.permitted_attributes.map do |attr|
        @descriptor_spec_helper.format_attr_str(attr)
      end.join(",\n")}
    }
  end

  def request_attributes
    {
      type: :object,
      properties: {
        #{@descriptor_spec_helper.resource_name}: {
          type: :object,
          properties: {
            #{@policy_helper.permitted_attributes.map do |attr|
              @descriptor_spec_helper.format_attr_str(attr)
            end.join(",\n")}
          }
        }
      }
    }
  end

end
EOS
end %>
